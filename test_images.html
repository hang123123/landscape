<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾ç‰‡åŠ è½½æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: #1a1a2e;
            color: white;
            padding: 20px;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .image-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
        }
        
        .image-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .image-card:hover img {
            transform: scale(1.05);
        }
        
        .loading {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .status {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            margin-top: 8px;
            display: inline-block;
        }
        
        .success { background: #10b981; color: white; }
        .error { background: #ef4444; color: white; }
        .loading-status { background: #3b82f6; color: white; }
    </style>
</head>
<body>
    <h1>ğŸ–¼ï¸ å›¾ç‰‡åŠ è½½æµ‹è¯•é¡µé¢</h1>
    <p>æµ‹è¯•å„ç§å›¾ç‰‡æºçš„åŠ è½½æ•ˆæœå’Œé”™è¯¯å¤„ç†</p>
    
    <div class="test-section">
        <h2>ğŸ›ï¸ æ™¯ç‚¹å›¾ç‰‡æµ‹è¯•</h2>
        <div class="image-grid" id="attractionGrid">
            <!-- æ™¯ç‚¹å›¾ç‰‡å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
        </div>
    </div>
    
    <div class="test-section">
        <h2>ğŸœ ç¾é£Ÿå›¾ç‰‡æµ‹è¯•</h2>
        <div class="image-grid" id="foodGrid">
            <!-- ç¾é£Ÿå›¾ç‰‡å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
        </div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“Š åŠ è½½ç»Ÿè®¡</h2>
        <div id="stats">
            <p>æ€»å›¾ç‰‡æ•°: <span id="totalImages">0</span></p>
            <p>æˆåŠŸåŠ è½½: <span id="successCount" style="color: #10b981;">0</span></p>
            <p>åŠ è½½å¤±è´¥: <span id="errorCount" style="color: #ef4444;">0</span></p>
            <p>æ­£åœ¨åŠ è½½: <span id="loadingCount" style="color: #3b82f6;">0</span></p>
        </div>
    </div>
    
    <script>
        // æ¨¡æ‹Ÿæ™¯ç‚¹å’Œç¾é£Ÿæ•°æ®
        const testData = {
            attractions: [
                { city: 'åŒ—äº¬', spots: ['æ•…å®«', 'å¤©å®‰é—¨', 'é•¿åŸ', 'å¤©å›'] },
                { city: 'ä¸Šæµ·', spots: ['å¤–æ»©', 'ä¸œæ–¹æ˜ç ', 'è±«å›­', 'å—äº¬è·¯'] },
                { city: 'å¤©æ´¥', spots: ['äº”å¤§é“', 'å¤æ–‡åŒ–è¡—', 'å¤©æ´¥ä¹‹çœ¼', 'æ„å¼é£æƒ…åŒº'] },
                { city: 'æµå—', spots: ['è¶µçªæ³‰', 'å¤§æ˜æ¹–', 'åƒä½›å±±', 'èŠ™è“‰è¡—'] }
            ],
            foods: [
                { city: 'åŒ—äº¬', foods: ['çƒ¤é¸­', 'ç‚¸é…±é¢', 'è±†æ±', 'é©´æ‰“æ»š'] },
                { city: 'ä¸Šæµ·', foods: ['å°ç¬¼åŒ…', 'ç”Ÿç…åŒ…', 'ç™½åˆ‡é¸¡', 'ç³–é†‹æ’éª¨'] },
                { city: 'å¤©æ´¥', foods: ['ç‹—ä¸ç†åŒ…å­', 'ç…é¥¼æœå­', 'è€³æœµçœ¼ç‚¸ç³•', 'åå…«è¡—éº»èŠ±'] },
                { city: 'æµå—', foods: ['æŠŠå­è‚‰', 'ç”œæ²«', 'æ²¹æ—‹', 'ç³–é†‹é²¤é±¼'] }
            ]
        };
        
        let stats = { total: 0, success: 0, error: 0, loading: 0 };
        
        // åŸå¸‚ç‰¹å®šå›¾ç‰‡æ˜ å°„
        const cityImages = {
            'åŒ—äº¬': ['forbidden-city', 'great-wall', 'temple-of-heaven', 'beijing'],
            'ä¸Šæµ·': ['shanghai-skyline', 'bund', 'oriental-pearl-tower', 'shanghai'],
            'å¤©æ´¥': ['tianjin', 'architecture', 'five-avenue', 'landmark'],
            'æµå—': ['jinan', 'spring', 'daming-lake', 'landscape']
        };
        
        // ç¾é£Ÿå…³é”®è¯æ˜ å°„
        const foodKeywords = {
            'çƒ¤é¸­': 'roast-duck',
            'å°ç¬¼åŒ…': 'xiaolongbao,dumpling',
            'ç‚¸é…±é¢': 'noodles,chinese',
            'ç…é¥¼æœå­': 'chinese,pancake',
            'ç‹—ä¸ç†åŒ…å­': 'baozi,steamed,bun',
            'æŠŠå­è‚‰': 'chinese,pork,braised'
        };
        
        // è·å–æ™¯ç‚¹å›¾ç‰‡URL
        function getAttractionImage(spot, city, index) {
            const cityKeywords = cityImages[city] || [city, 'landmark', 'tourism'];
            
            const imageServices = [
                `https://source.unsplash.com/300x200/?${encodeURIComponent(cityKeywords[0])},architecture`,
                `https://source.unsplash.com/300x200/?${encodeURIComponent(cityKeywords[1])},travel`,
                `https://source.unsplash.com/300x200/?china,${encodeURIComponent(cityKeywords[2])}`,
                `https://source.unsplash.com/300x200/?landmark,historic,temple`,
                `https://source.unsplash.com/300x200/?chinese,architecture,traditional`,
                `https://picsum.photos/300/200?random=${encodeURIComponent(spot + city + index)}`,
                `https://images.pexels.com/photos/${1000000 + (index * 100)}/pexels-photo-${1000000 + (index * 100)}.jpeg?auto=compress&cs=tinysrgb&w=300&h=200&fit=crop`
            ];
            
            return imageServices[index % imageServices.length];
        }
        
        // è·å–ç¾é£Ÿå›¾ç‰‡URL
        function getFoodImage(food, city, index) {
            const foodKeyword = foodKeywords[food] || 'chinese,food,delicious';
            
            const imageServices = [
                `https://source.unsplash.com/300x200/?${foodKeyword}`,
                `https://source.unsplash.com/300x200/?${encodeURIComponent(food)},food`,
                `https://source.unsplash.com/300x200/?chinese,cuisine,${city}`,
                `https://source.unsplash.com/300x200/?asian,food,restaurant`,
                `https://source.unsplash.com/300x200/?traditional,chinese,meal`,
                `https://picsum.photos/300/200?random=${encodeURIComponent(food + city + index + 'food')}`,
                `https://foodish-api.herokuapp.com/images/burger/burger${(index % 30) + 1}.jpg`
            ];
            
            return imageServices[index % imageServices.length];
        }
        
        // åˆ›å»ºå›¾ç‰‡å¡ç‰‡
        function createImageCard(src, title, type) {
            const card = document.createElement('div');
            card.className = 'image-card';
            
            const img = document.createElement('img');
            img.src = src;
            img.alt = title;
            img.className = 'loading';
            
            const titleEl = document.createElement('h3');
            titleEl.textContent = title;
            
            const statusEl = document.createElement('div');
            statusEl.className = 'status loading-status';
            statusEl.textContent = 'åŠ è½½ä¸­...';
            
            // å›¾ç‰‡åŠ è½½äº‹ä»¶
            img.onload = function() {
                this.classList.remove('loading');
                statusEl.className = 'status success';
                statusEl.textContent = 'âœ… åŠ è½½æˆåŠŸ';
                stats.loading--;
                stats.success++;
                updateStats();
            };
            
            img.onerror = function() {
                this.classList.remove('loading');
                statusEl.className = 'status error';
                statusEl.textContent = 'âŒ åŠ è½½å¤±è´¥';
                
                // å°è¯•å¤‡ç”¨å›¾ç‰‡
                const fallbacks = type === 'food' ? [
                    'https://source.unsplash.com/300x200/?food,delicious',
                    'https://source.unsplash.com/300x200/?chinese,cuisine',
                    'https://picsum.photos/300/200?random=' + Math.random()
                ] : [
                    'https://source.unsplash.com/300x200/?travel,landmark',
                    'https://source.unsplash.com/300x200/?architecture,building',
                    'https://picsum.photos/300/200?random=' + Math.random()
                ];
                
                const randomFallback = fallbacks[Math.floor(Math.random() * fallbacks.length)];
                this.src = randomFallback;
                this.onerror = function() {
                    stats.loading--;
                    stats.error++;
                    updateStats();
                };
            };
            
            card.appendChild(img);
            card.appendChild(titleEl);
            card.appendChild(statusEl);
            
            stats.total++;
            stats.loading++;
            
            return card;
        }
        
        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            document.getElementById('totalImages').textContent = stats.total;
            document.getElementById('successCount').textContent = stats.success;
            document.getElementById('errorCount').textContent = stats.error;
            document.getElementById('loadingCount').textContent = stats.loading;
        }
        
        // ç”Ÿæˆæµ‹è¯•å›¾ç‰‡
        function generateTestImages() {
            const attractionGrid = document.getElementById('attractionGrid');
            const foodGrid = document.getElementById('foodGrid');
            
            // ç”Ÿæˆæ™¯ç‚¹å›¾ç‰‡
            testData.attractions.forEach((city, cityIndex) => {
                city.spots.forEach((spot, spotIndex) => {
                    const imageUrl = getAttractionImage(spot, city.city, spotIndex);
                    const card = createImageCard(imageUrl, `${city.city} - ${spot}`, 'attraction');
                    attractionGrid.appendChild(card);
                });
            });
            
            // ç”Ÿæˆç¾é£Ÿå›¾ç‰‡
            testData.foods.forEach((city, cityIndex) => {
                city.foods.forEach((food, foodIndex) => {
                    const imageUrl = getFoodImage(food, city.city, foodIndex);
                    const card = createImageCard(imageUrl, `${city.city} - ${food}`, 'food');
                    foodGrid.appendChild(card);
                });
            });
            
            updateStats();
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåç”Ÿæˆæµ‹è¯•å›¾ç‰‡
        document.addEventListener('DOMContentLoaded', function() {
            generateTestImages();
            
            // æ¯5ç§’æ›´æ–°ç»Ÿè®¡
            setInterval(updateStats, 5000);
        });
    </script>
</body>
</html> 